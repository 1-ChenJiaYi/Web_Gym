# äº‹ä»¶å¾ªç¯

1ã€è¿›ç¨‹ï¼ˆå·¥å‚ï¼‰ï¼šè®¡ç®—æœºå·²ç»è¿è¡Œçš„ç¨‹åºï¼Œæ˜¯æ“ä½œç³»ç»Ÿç®¡ç†ç¨‹åºçš„ä¸€ç§æ–¹å¼ã€‚



2ã€çº¿ç¨‹ï¼ˆå·¥äººï¼‰ï¼šèƒ½å¤Ÿè¿è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ï¼Œé€šå¸¸è¢«åŒ…å«å’Œå®‰æ’åœ¨è¿›ç¨‹ä¸­ã€‚



3ã€åœ¨å•æ ¸cpuä¸­ï¼Œæ˜¯åœ¨å¤šä¸ªè¿›ç¨‹ä¸­æ¥å›åˆ‡æ¢ã€‚



4ã€js æ˜¯å•çº¿ç¨‹çš„ã€‚



5ã€å¼‚æ­¥ä»£ç çš„æ‰§è¡Œ:

(1) è®¡æ—¶è¿™ç§æ“ä½œæ˜¯æµè§ˆå™¨è¿ä½œçš„ï¼Œæµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„ã€‚





ğŸŒŸ6ã€äº‹ä»¶é˜Ÿåˆ—(é¢è¯•å¸¸è€ƒ)ï¼š

(1) jsçº¿ç¨‹æ‰§è¡Œå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä»£ç ï¼š

éå¼‚æ­¥çš„æ™®é€šä»£ç  

éPromiseçš„resolveå’Œrej



(2) äº‹ä»¶é˜Ÿåˆ— (é˜Ÿåˆ—ï¼Œå…ˆå…¥å…ˆå‡º)ï¼š

â€‹	(a)å®ä»»åŠ¡é˜Ÿåˆ— (macrotask)ï¼š  

â€‹	**åœ¨æ‰§è¡Œå®ä»»åŠ¡å‰è¦æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚**

â€‹    å¸¸è§åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—çš„ï¼šajaxã€setTimeoutã€setInterval ã€DOMç›‘å¬ã€UI Rendering

â€‹	(b) å¾®ä»»åŠ¡é˜Ÿåˆ— ï¼š 

â€‹	Promiseçš„thenå›è°ƒã€Mutation Observer APIã€queueMicrotask()



---



### Promiseé¢è¯•é¢˜ï¼š

Promiseå†…éƒ¨çš„ä»£ç åœ¨pendingæ—¶æ˜¯ç›´æ¥ä¼šæ‰§è¡Œçš„ï¼Œåœ¨é‡åˆ°resolveæˆ–è€…rejectå°±ä¼šè¿”å›å€¼ï¼Œè¢«å¤–é¢çš„catchæˆ–è€…æ˜¯thenæ¥æ”¶ã€‚

```js
// äº‹ä»¶å¾ªç¯ï¼š

```





awaitä»£ç çš„æ‰§è¡Œé¡ºåºï¼š 

```js
function foo(url) {
    clg("666")
    return new Promise((resolve, reject) => {
        setTimeout(()=>{
            resolve(url) 
        }, 0)
    })
}

async function bar() {
    clg('begin')
	const res = await foo("why") // ç›¸å½“äºè¿”å›äº†ä¸€ä¸ªurl
    clg(res)  // ç­‰å¾…ä¸Šé¢çš„resolve 
}


bar() 
```





